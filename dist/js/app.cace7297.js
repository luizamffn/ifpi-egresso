(function(a){function t(t){for(var o,r,c=t[0],n=t[1],l=t[2],u=0,m=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),e()}function e(){for(var a,t=0;t<s.length;t++){for(var e=s[t],o=!0,r=1;r<e.length;r++){var n=e[r];0!==i[n]&&(o=!1)}o&&(s.splice(t--,1),a=c(c.s=e[0]))}return a}var o={},i={app:0},s=[];function r(a){return c.p+"js/"+({}[a]||a)+"."+{"chunk-2d216214":"9ebff182","chunk-2d216257":"256ee085","chunk-3031cb54":"236b44a2"}[a]+".js"}function c(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return a[t].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.e=function(a){var t=[],e=i[a];if(0!==e)if(e)t.push(e[2]);else{var o=new Promise((function(t,o){e=i[a]=[t,o]}));t.push(e[2]=o);var s,n=document.createElement("script");n.charset="utf-8",n.timeout=120,c.nc&&n.setAttribute("nonce",c.nc),n.src=r(a);var l=new Error;s=function(t){n.onerror=n.onload=null,clearTimeout(u);var e=i[a];if(0!==e){if(e){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+a+" failed.\n("+o+": "+s+")",l.name="ChunkLoadError",l.type=o,l.request=s,e[1](l)}i[a]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:n})}),12e4);n.onerror=n.onload=s,document.head.appendChild(n)}return Promise.all(t)},c.m=a,c.c=o,c.d=function(a,t,e){c.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:e})},c.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,t){if(1&t&&(a=c(a)),8&t)return a;if(4&t&&"object"===typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var o in a)c.d(e,o,function(t){return a[t]}.bind(null,o));return e},c.n=function(a){var t=a&&a.__esModule?function(){return a["default"]}:function(){return a};return c.d(t,"a",t),t},c.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},c.p="/",c.oe=function(a){throw console.error(a),a};var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var d=l;s.push([0,"chunk-vendors"]),e()})({0:function(a,t,e){a.exports=e("56d7")},"034f":function(a,t,e){"use strict";e("85ec")},1927:function(a,t,e){"use strict";e("1e20")},"1de9":function(a,t,e){"use strict";e("aa55")},"1e20":function(a,t,e){},2369:function(a,t,e){},"289a":function(a,t,e){"use strict";e("ee01")},"2a85":function(a,t,e){},3162:function(a,t,e){"use strict";e("7330")},"40ac":function(a,t,e){},"468f":function(a,t,e){},"56d7":function(a,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("2b0e"),i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},s=[],r={name:"app"},c=r,n=(e("034f"),e("2877")),l=Object(n["a"])(c,i,s,!1,null,null,null),u=l.exports,d=e("2591"),m=e("8c4f"),f=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",[o("md-content",[o("div",{staticClass:"md-layout"},[o("div",{staticClass:"md-layout-item md-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100"},[o("md-toolbar",[o("md-avatar",[o("img",{staticClass:"imagem",attrs:{src:e("c1d1")}})]),o("h1",{staticClass:"md-title"},[a._v("Sistema de Egresso")])],1)],1)]),o("div",{staticClass:"md-layout"},[o("div",{staticClass:"md-layout-item md-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100"},[o("md-card",[o("md-card-header"),o("md-card-content",[o("div",{staticClass:"md-layout md-gutter"},[o("div",{staticClass:"md-layout-item md-size-70"},[o("md-field",{attrs:{"md-clearable":""}},[o("label",[a._v("Username")]),o("md-input",{model:{value:a.user.email,callback:function(t){a.$set(a.user,"email",t)},expression:"user.email"}})],1)],1),o("div",{staticClass:"md-layout-item md-size-70"},[o("md-field",{attrs:{"md-clearable":""}},[o("label",[a._v("Password")]),o("md-input",{attrs:{type:"password"},model:{value:a.user.password,callback:function(t){a.$set(a.user,"password",t)},expression:"user.password"}})],1)],1)]),o("div",{staticClass:"md-layout md-gutter"},[1==a.usuarioOuSenhaInvalidos?o("div",{staticClass:"md-layout-item md-size-70"},[o("p",{staticStyle:{color:"red !important"}},[a._v("Usuário ou senha inválidos")])]):a._e()])]),o("md-card-actions",[o("div",{staticClass:"color-button"},[o("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.logar_user(),a.showDialog=!0}}},[a._v(" Logar ")])],1)])],1)],1)]),o("p",[a._v("Ainda não possui conta? "),o("span",{on:{click:function(t){return a.tela_cadastro()}}},[a._v("Cadastre-se")])]),o("md-dialog",{staticStyle:{opacity:"100%"},attrs:{"md-active":a.showDialog},on:{"update:mdActive":function(t){a.showDialog=t},"update:md-active":function(t){a.showDialog=t}}},[o("md-dialog-title",[a._v(" Entrando... ")])],1)],1)],1)},p=[],_=(e("5319"),e("ac1f"),e("159b"),{data:function(){return{user:{email:"",password:""},usuarioOuSenhaInvalidos:!1,showDialog:!1}},methods:{tela_cadastro:function(){window.location.replace("/cadastro")},logar_user:function(){var a=this;d["a"].auth().signInWithEmailAndPassword(this.user.email,this.user.password).then((function(){var a=d["a"].firestore(),t=d["a"].auth().currentUser;a.collection("usuario").where("auth_uid","==",t.uid).get().then((function(a){a.forEach((function(a){"aluno"==a.data().tipo_usuario?window.location.replace("aluno/home"):window.location.replace("funcionario/home")}))})).catch((function(a){console.log("Erro ao recuperar usuario: ",a)}))})).catch((function(t){a.showDialog=!1,a.usuarioOuSenhaInvalidos=!0}))}}}),v=_,h=(e("e5d5"),Object(n["a"])(v,f,p,!1,null,"01a8c71b",null)),g=h.exports,b=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("md-content",[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100"},[e("md-toolbar",[e("h1",{staticClass:"md-title"},[a._v("Sistema de Egresso - IFPI")])])],1)]),e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100 md-medium-size-100 md-small-size-100 md-xsmall-size-100"},[e("md-card",[e("md-card-header",[e("div",{staticStyle:{width:"100%"}}),e("div",{staticClass:"md-title"},[a._v("Novo usuario")])]),e("form",{on:{submit:function(t){return t.preventDefault(),a.validateCadastro(t)}}},[e("md-card-content",[e("div",{staticClass:"md-layout md-gutter"},[e("div",{staticClass:"md-layout-item md-size-50 md-xsmall-size-100"},[e("md-field",{class:a.getValidationClass("email")},[e("label",[a._v("Email")]),e("md-input",{model:{value:a.user.email,callback:function(t){a.$set(a.user,"email",t)},expression:"user.email"}}),a.$v.user.email.required?e("span",{staticClass:"md-error"},[a._v("Formato de email inválido")]):e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1),e("div",{staticClass:"md-layout-item md-size-50 md-xsmall-size-100"},[e("md-field",{class:a.getValidationClass("password")},[e("label",[a._v("Senha")]),e("md-input",{attrs:{type:"password"},model:{value:a.user.password,callback:function(t){a.$set(a.user,"password",t)},expression:"user.password"}}),a.$v.user.password.required?a._e():e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1),e("div",{staticClass:"md-layout-item md-size-50 md-xsmall-size-100"},[e("md-field",{class:a.getValidationClass("perfil")},[e("md-select",{attrs:{name:"perfil",placeholder:"Perfil"},model:{value:a.user.perfil,callback:function(t){a.$set(a.user,"perfil",t)},expression:"user.perfil"}},[e("md-option",{attrs:{value:"aluno"}},[a._v("Aluno")]),e("md-option",{attrs:{value:"coordenador"}},[a._v("Coordenador")]),e("md-option",{attrs:{value:"professor"}},[a._v("Professor")])],1),a.$v.user.perfil.equired?a._e():e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1)])]),e("md-card-actions",[e("div",{staticClass:"color-button"},[e("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[a._v(" Cadastrar ")]),e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){return a.home()}}},[a._v(" Voltar ")])],1)])],1)],1)],1)]),e("md-dialog",{attrs:{"md-active":a.showDialog},on:{"update:mdActive":function(t){a.showDialog=t},"update:md-active":function(t){a.showDialog=t}}},[e("md-dialog-title",[a._v("Cadastro Realizado com sucesso!")]),e("md-dialog-actions",[e("md-button",{staticClass:"md-primary",on:{click:function(t){return a.home()}}},[a._v("Voltar")])],1)],1)],1)],1)},C=[],y=e("1dce"),w=e("b5ae"),x={mixins:[y["validationMixin"]],data:function(){return{user:{email:"",password:"",perfil:""},usuarioOuSenhaInvalidos:!1,showDialog:!1,botaoCadastro:!0}},validations:{user:{email:{required:w["required"],email:w["email"]},password:{required:w["required"]},perfil:{required:w["required"]}}},methods:{home:function(){window.location.replace("/")},getValidationClass:function(a){var t=this.$v.user[a];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateCadastro:function(){this.$v.$touch(),this.$v.$invalid||this.recuperarPessoaPorEmail()},recuperarPessoaPorEmail:function(){var a=this,t=d["a"].firestore();t.collection("pessoa").where("email","==",this.user.email).get().then((function(t){t.size>0&&a.recuperarUsuarioPorPessoa(t.docs[0].id)})).catch((function(a){console.log("Erro ao recuperar Pessoa. ",a)}))},verificarAluno:function(a){var t=this,e=d["a"].firestore();e.collection("aluno").where("pessoa_uid","==",a).get().then((function(e){e.size>0?t.cadastrar(a):alert("Solicite ao Coordenador seu cadastro de aluno!")})).catch((function(a){console.log("Erro ao recuperar usuario! ",a)}))},verificarFuncionario:function(a){var t=this,e=d["a"].firestore();e.collection("funcionario").where("pessoa_uid","==",a).get().then((function(e){e.size>0?t.recuperarCursoFuncionario(e.docs[0].id,a):alert("Solicite seu cadastro de "+t.user.perfil+"no sistema!")})).catch((function(a){console.log("Erro ao recuperar funcionario! ",a)}))},recuperarCursoFuncionario:function(a,t){var e=this,o=d["a"].firestore();o.collection("cursoFuncionario").where("funcionario_uid","==",a).get().then((function(a){a.size>0&&a.docs[0].data().cargo==e.user.perfil?e.cadastrar(t):alert("Solicite seu cadastro de "+e.user.perfil+" no sistema!")})).catch((function(a){console.log("Erro ao recuperar cursoFuncionario! ",a)}))},recuperarUsuarioPorPessoa:function(a){var t=this,e=d["a"].firestore();e.collection("usuario").where("pessoa_uid","==",a).get().then((function(e){0==e.size?"aluno"==t.user.perfil?t.verificarAluno(a):t.verificarFuncionario(a):alert("Email já cadastrado!")})).catch((function(a){console.log("Erro ao recuperar usuario! ",a)}))},cadastrar:function(a){var t=this;d["a"].auth().createUserWithEmailAndPassword(this.user.email,this.user.password).then((function(e){t.cadastrarUsuario(e.user.uid,a)})).catch((function(a){alert(a.message)}))},cadastrarUsuario:function(a,t){var e=this,o=d["a"].firestore();o.collection("usuario").add({auth_uid:a,pessoa_uid:t,tipo_usuario:e.user.perfil}).then((function(a){alert("Cadastro realizado com sucesso!"),window.location.replace("/")})).catch((function(a){indow.alert("O usuario não foi Cadastrado!")}))}}},z=x,k=(e("f4f0"),Object(n["a"])(z,b,C,!1,null,"2e223c59",null)),S=k.exports,D=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("my-base",[e("div",{attrs:{slot:"my-content"},slot:"my-content"},["aluno"==a.perfil?e("my-conteudo"):a._e(),"aluno"!=a.perfil?e("span",[a._v("Bem vido ao Sistema de Egresso do IFPI, "+a._s(a.pessoa.nome))]):a._e()],1)])},E=[],O=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"page-container md-layout-column"},[o("md-toolbar",{staticClass:"md-primary"},[o("md-button",{staticClass:"md-icon-button",on:{click:function(t){a.showNavigation=!0}}},[o("md-icon",[a._v("menu")])],1),o("my-title"),o("div",{staticClass:"md-toolbar-section-end"},[o("md-button",{on:{click:function(t){return a.sair()}}},[a._v("Sair")])],1)],1),o("md-drawer",{attrs:{"md-active":a.showNavigation,"md-swipeable":""},on:{"update:mdActive":function(t){a.showNavigation=t},"update:md-active":function(t){a.showNavigation=t}}},[o("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[o("md-avatar",[o("img",{staticClass:"imagem",attrs:{src:e("c1d1")}})]),o("div",{staticClass:"md-layout"},[o("div",{staticClass:"md-layout-item md-size-100"},[a._v(" "+a._s(a.pessoa.nome)+" ")]),o("div",{staticClass:"md-layout-item md-size-100"},[a._v(" "+a._s(a.perfil)+" ")])])],1),"Aluno"==a.perfil?o("my-menu-aluno"):o("my-menu-funcionario")],1),o("md-content",[a._t("my-content")],2)],1)},A=[],$=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("md-list",[e("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.home_page()}}},[e("md-list-item",{class:["home"==a.title?"active":""]},[e("md-icon",[a._v("home")]),e("span",{staticClass:"md-list-item-text"},[a._v("Página Inicial")])],1)],1),e("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.exibir_configuracoes()}}},[e("md-list-item",[e("md-icon",[a._v("settings")]),e("span",{staticClass:"md-list-item-text"},[a._v("Configurações")])],1)],1)])},P=[],M={data:function(){return{title:""}},mounted:function(){console.log(localStorage.getItem("title")),this.title=localStorage.getItem("title")},methods:{home_page:function(){localStorage.setItem("title","home"),window.location.replace("/home")},exibir_configuracoes:function(){localStorage.setItem("title","configuracoes"),window.location.replace("/configuracoes")}}},q=M,F=Object(n["a"])(q,$,P,!1,null,"4ba41db4",null),N=F.exports,I=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("md-list",[e("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.home_page()}}},[e("md-list-item",{class:["home"==a.title?"active":""]},[e("md-icon",[a._v("home")]),e("span",{staticClass:"md-list-item-text"},[a._v("Página Inicial")])],1)],1),e("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.exibir_alunos()}}},[e("md-list-item",{class:["alunos"==a.title?"active":""]},[e("md-icon",[a._v("group")]),e("span",{staticClass:"md-list-item-text"},[a._v("Alunos")])],1)],1),e("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.exibir_cursos()}}},[e("md-list-item",{class:["cursos"==a.title?"active":""]},[e("md-icon",[a._v("list")]),e("span",{staticClass:"md-list-item-text"},[a._v("Cursos")])],1)],1),e("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.exibir_relatorios()}}},[e("md-list-item",[e("md-icon",[a._v("description")]),e("span",{staticClass:"md-list-item-text"},[a._v("Relatórios")])],1)],1),e("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.exibir_configuracoes()}}},[e("md-list-item",[e("md-icon",[a._v("settings")]),e("span",{staticClass:"md-list-item-text"},[a._v("Configurações")])],1)],1)])},T=[],j={data:function(){return{title:""}},mounted:function(){console.log(localStorage.getItem("title")),this.title=localStorage.getItem("title")},methods:{home_page:function(){localStorage.setItem("title","home"),window.location.replace("/home")},exibir_alunos:function(){localStorage.setItem("title","alunos"),window.location.replace("/alunos")},exibir_cursos:function(){localStorage.setItem("title","cursos"),window.location.replace("/cursos")},exibir_relatorios:function(){localStorage.setItem("title","relatorios"),window.location.replace("/relatorios")},exibir_configuracoes:function(){localStorage.setItem("title","configuracoes"),window.location.replace("/configuracoes")}}},V=j,R=Object(n["a"])(V,I,T,!1,null,"361489b0",null),J=R.exports,U=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",["home"==a.title?e("span",{staticClass:"md-title"},[a._v("Página Inicial")]):"alunos"==a.title?e("span",{staticClass:"md-title"},[a._v("Alunos")]):"cursos"==a.title?e("span",{staticClass:"md-title"},[a._v("Cursos")]):"relatorios"==a.title?e("span",{staticClass:"md-title"},[a._v("Relatórios")]):"configuracoes"==a.title?e("span",{staticClass:"md-title"},[a._v("Configurações")]):a._e()])},L=[],B={data:function(){return{title:""}},mounted:function(){console.log(localStorage.getItem("title")),this.title=localStorage.getItem("title")}},Y=B,G=Object(n["a"])(Y,U,L,!1,null,"0bb7a409",null),W=G.exports,H={data:function(){return{showNavigation:!1,pessoa:{},perfil:"",title:""}},mounted:function(){var a=this;console.log(localStorage.getItem("title")),this.title=localStorage.getItem("title");var t=d["a"].auth().currentUser,e=d["a"].firestore();e.collection("usuario").where("auth_uid","==",t.uid).get().then((function(t){t.forEach((function(t){"admin"==t.data().tipo_usuario?a.perfil="Administrador":"aluno"==t.data().tipo_usuario?a.perfil="Aluno":"coordenador"==t.data().tipo_usuario?a.perfil="Coordenador":"professor"==t.data().tipo_usuario&&(a.perfil="Professor"),localStorage.setItem("perfil_usuario",t.data().tipo_usuario),localStorage.setItem("pessoa_logada_uid",t.data().pessoa_uid),a.recuperarPessoa(t.data())}))})).catch((function(a){console.log("Erro ao recuperar usuario: ",a)}))},methods:{sair:function(){d["a"].auth().signOut().then((function(){window.location.replace("/")}))},home_page:function(){window.location.replace("/home"),this.title="home"},recuperarPessoa:function(a){var t=this,e=d["a"].firestore();e.collection("pessoa").doc(a.pessoa_uid).get().then((function(a){t.pessoa=a.data()})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))}},components:{"my-menu-aluno":N,"my-menu-funcionario":J,"my-title":W}},X=H,K=(e("e542"),Object(n["a"])(X,O,A,!1,null,"d81dfc92",null)),Q=K.exports,Z=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"md-layout md-gutter"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("md-card",[e("md-card-header",[e("md-card-header-text",[e("div",{staticClass:"md-title"},[a._v(a._s(a.aluno.nome))])])],1),e("md-card-content",{staticClass:"md-scrollbar"},[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("md-divider"),e("h4",{staticStyle:{display:"inline-block"}},[a._v("Matrículas")]),e("md-list",{key:a.keyMatriculas},a._l(a.matriculas,(function(t){return e("md-list-item",{attrs:{"md-expand":"","md-expanded":t.expand},on:{"update:mdExpanded":function(e){return a.$set(t,"expand",e)},"update:md-expanded":function(e){return a.$set(t,"expand",e)}}},[e("span",{staticClass:"md-list-item-text"},[a._v(a._s(t.curso_descricao)+" - "+a._s(t.curso_nivel))]),e("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},[e("md-tabs",{attrs:{"md-alignment":"centered"}},[e("md-tab",{attrs:{id:"tab-home","md-label":"Informações"}},[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Nº Matrícula")]),e("md-input",{attrs:{name:"numero_matricula",readonly:"true"},model:{value:t.numero_matricula,callback:function(e){a.$set(t,"numero_matricula",e)},expression:"m.numero_matricula"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Status Matrícula")]),e("md-input",{attrs:{name:"numero_matricula",readonly:"true"},model:{value:t.status_matricula,callback:function(e){a.$set(t,"status_matricula",e)},expression:"m.status_matricula"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Data Início")]),e("md-input",{attrs:{name:"numero_matricula",readonly:"true"},model:{value:t.data_inicio,callback:function(e){a.$set(t,"data_inicio",e)},expression:"m.data_inicio"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Data Conclusão")]),e("md-input",{attrs:{name:"numero_matricula",readonly:"true"},model:{value:t.data_fim,callback:function(e){a.$set(t,"data_fim",e)},expression:"m.data_fim"}})],1)],1)])])])]),e("md-tab",{attrs:{id:"tab-pages","md-label":"Ocupaçoes"}},[e("div",{key:a.keyOcupacoes,staticClass:"md-layout"},a._l(t.ocupacoes,(function(t){return e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-list-item",[e("md-card-header-text",[null==t.data_fim?e("span",{staticClass:"md-list-item-text"},[a._v(a._s(t.local)+" iniciado em: "+a._s(t.data_inicio))]):a._e(),null!=t.data_fim?e("span",{staticClass:"md-list-item-text"},[a._v(a._s(t.local)+" ("+a._s(t.data_inicio)+" até "+a._s(t.data_fim)+")")]):a._e(),e("div",{staticClass:"md-subhead"},[a._v("Remunerado: "+a._s(1==t.eh_remunerado?"Sim":"Não"))])])],1)],1)])])})),0)])],1)],1)],1)})),1)],1)])])],1)],1)])])},aa=[],ta=(e("fb6a"),{data:function(){return{aluno:{uid:"",nome:"",data_nascimento:"",email:"",cpf:"",telefone:"",pessoa_uid:""},matriculas:[],matricula:{aluno_uid:"",data_cadastro:"",data_fim:"",curso_uid:"",data_inicio:"",numero_matricula:"",status_matricula:"",curso_descricao:"",curso_nivel:"",expand:!1,ocupacoes:[]},numeroMatriculaValida:!1,cursos:[],keyMatriculas:0,keyOcupacoes:0,matricula_selecionada:{}}},created:function(){var a=this;this.$bus.$on("adicionar_ocupacao",(function(t){return a.adicionar_ocupacao(t)}))},mounted:function(){this.recuperarAluno(localStorage.getItem("pessoa_logada_uid"))},methods:{adicionar_ocupacao:function(a){this.matricula_selecionada.ocupacoes.push(a),this.keyOcupacoes+=1},recuperarAluno:function(a){var t=this,e=d["a"].firestore();e.collection("aluno").where("pessoa_uid","==",a).get().then((function(a){a.forEach((function(a){t.aluno.uid=a.id,t.aluno.pessoa_uid=a.data().pessoa_uid,t.recuperarPessoa(a.data().pessoa_uid)}))})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarPessoa:function(a){var t=this,e=d["a"].firestore();e.collection("pessoa").doc(a).get().then((function(a){t.aluno.data_nascimento=JSON.stringify(a.data().data_nascimento.toDate()).slice(1,11),t.aluno.nome=a.data().nome,t.aluno.email=a.data().email,t.aluno.cpf=a.data().cpf,t.aluno.telefone=a.data().telefone,t.recuperarMatriculas(t.aluno.uid)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarMatriculas:function(a){var t=this,e=d["a"].firestore();e.collection("matricula").where("aluno_uid","==",a).get().then((function(a){a.forEach((function(a){var e={id:"",numero_matricula:"",curso_uid:"",data_inicio:"",data_fim:null,status_matricula:"",curso_descricao:"",curso_nivel:"",ocupacoes:[],expand:!1};e.id=a.id,e.numero_matricula=a.data().numero_matricula,e.curso_uid=a.data().curso_uid,e.data_inicio=JSON.stringify(a.data().data_inicio.toDate()).slice(1,11),null!=a.data().data_fim&&(e.data_fim=JSON.stringify(a.data().data_fim.toDate()).slice(1,11)),e.status_matricula=a.data().status_matricula,t.recuperarCurso(e)}))})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarCurso:function(a){var t=this,e=d["a"].firestore();e.collection("curso").doc(a.curso_uid).get().then((function(e){a.curso_descricao=e.data().descricao,a.curso_nivel=e.data().nivel,"tecnologo"==a.curso_nivel?a.curso_nivel="Tecnólogo":"medio_integrado"==a.curso_nivel?a.curso_nivel="Médio integrado":"tecnico"==a.curso_nivel?a.curso_nivel="Técnico":"bacharel"==a.curso_nivel?a.curso_nivel="Bacharel":"licenciatura"==a.curso_nivel&&(a.curso_nivel="Licenciatura"),t.recuperarOcupacoes(a)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarOcupacoes:function(a){var t=this,e=d["a"].firestore();e.collection("ocupacao").where("matricula_uid","==",a.id).get().then((function(e){e.forEach((function(t){var e={uid:"",local:"",data_inicio:"",data_fim:null,eh_remunerado:""};e.uid=t.id,e.local=t.data().local,e.data_inicio=JSON.stringify(t.data().data_inicio.toDate()).slice(1,11),null!=t.data().data_fim&&(e.data_fim=JSON.stringify(t.data().data_fim.toDate()).slice(1,11)),e.eh_remunerado=t.data().eh_remunerado,a.ocupacoes.push(e)})),t.matriculas.push(a)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))}}}),ea=ta,oa=(e("1de9"),Object(n["a"])(ea,Z,aa,!1,null,"1e695986",null)),ia=oa.exports,sa={data:function(){return{pessoa:{},perfil:""}},mounted:function(){var a=this,t=d["a"].auth().currentUser,e=d["a"].firestore();e.collection("usuario").where("auth_uid","==",t.uid).get().then((function(t){t.forEach((function(t){a.recuperarPessoa(t.data()),a.perfil=t.data().perfil}))})).catch((function(a){console.log("Erro ao recuperar usuario: ",a)}))},methods:{recuperarPessoa:function(a){var t=this,e=d["a"].firestore();e.collection("pessoa").doc(a.pessoa_uid).get().then((function(a){t.pessoa=a.data()})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))}},components:{"my-base":Q,"my-conteudo":ia}},ra=sa,ca=(e("3162"),Object(n["a"])(ra,D,E,!1,null,"08422498",null)),na=ca.exports,la=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("my-base",[e("div",{attrs:{slot:"my-content"},slot:"my-content"},[e("div",[e("md-table",{attrs:{"md-sort":"name","md-sort-order":"asc","md-card":"","md-fixed-header":""},scopedSlots:a._u([{key:"md-table-row",fn:function(t){var o=t.item;return e("md-table-row",{},[e("md-table-cell",{staticClass:"cursor",attrs:{"md-label":"Sequencia","md-sort-by":"id","md-numeric":""},nativeOn:{click:function(t){return a.aluno_detail(o)}}},[a._v(a._s(o.id))]),e("md-table-cell",{staticClass:"cursor",attrs:{"md-label":"Nome","md-sort-by":"nome"},nativeOn:{click:function(t){return a.aluno_detail(o)}}},[a._v(a._s(o.nome))]),e("md-table-cell",{staticClass:"cursor",attrs:{"md-label":"CPF","md-sort-by":"cpf"},nativeOn:{click:function(t){return a.aluno_detail(o)}}},[a._v(a._s(o.cpf))]),e("md-table-cell",{staticClass:"cursor",attrs:{"md-label":"Email","md-sort-by":"email"},nativeOn:{click:function(t){return a.aluno_detail(o)}}},[a._v(a._s(o.email))])],1)}}]),model:{value:a.searched,callback:function(t){a.searched=t},expression:"searched"}},[e("md-table-toolbar",[e("div",{staticClass:"md-toolbar-section-start"},[e("h1",{staticClass:"md-title"},[a._v("Alunos")])]),e("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[e("md-input",{attrs:{placeholder:"Pesquisar por nome..."},on:{input:a.searchOnTable},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1)],1),e("md-table-empty-state",{attrs:{"md-label":"Nenhum aluno encontrado","md-description":"Nenhum usuário encontrado para esta consulta '"+a.search+"'. Tente um nome de aluno diferente."}})],1)],1)])])},ua=[],da=(e("d3b7"),e("25f0"),e("4de4"),e("caad"),e("2532"),e("841c"),function(a){return a.toString().toLowerCase()}),ma=function(a,t){return t?a.filter((function(a){return da(a.nome).includes(da(t))})):a},fa={name:"TableSearch",data:function(){return{search:null,searched:[],alunos:[]}},mounted:function(){var a=this;"admin"==localStorage.getItem("perfil_usuario")?a.recuperarAlunos():a.recuperarFuncionario()},methods:{recuperarFuncionario:function(){var a=this,t=d["a"].firestore();t.collection("funcionario").where("pessoa_uid","==",localStorage.getItem("pessoa_logada_uid")).get().then((function(t){a.recuperarCursoFuncionario(t.docs[0].id)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarCursoFuncionario:function(a){var t=this,e=d["a"].firestore();e.collection("cursoFuncionario").where("funcionario_uid","==",a).get().then((function(a){a.forEach((function(a){t.recuperarMatriculaPorCurso(a.data().curso_uid)}))})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarMatriculaPorCurso:function(a){var t=this,e=d["a"].firestore();e.collection("matricula").where("curso_uid","==",a).get().then((function(a){a.forEach((function(a){t.recuperarAluno(a.data().aluno_uid)}))})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarAluno:function(a){var t=this,e=d["a"].firestore();e.collection("aluno").doc(a).get().then((function(a){var e={id:"",email:"",aluno_uid:"",nome:""};e.aluno_uid=a.id,console.log(a.data()),t.recuperarPessoa(a.data().pessoa_uid,e)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarAlunos:function(){var a=this,t=d["a"].firestore();t.collection("aluno").get().then((function(t){t.forEach((function(t){var e={id:"",email:"",aluno_uid:"",nome:""};e.aluno_uid=t.id,a.recuperarPessoa(t.data().pessoa_uid,e)}))})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarPessoa:function(a,t){var e=this,o=d["a"].firestore();o.collection("pessoa").doc(a).get().then((function(a){t.cpf=a.data().cpf,t.email=a.data().email,t.nome=a.data().nome,t.id=e.alunos.length+1,e.alunos.push(t)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},aluno_detail:function(a){localStorage.setItem("title","aluno"),localStorage.setItem("aluno_uid",a.aluno_uid),window.location.replace("/aluno/detalhes")},newUser:function(){window.alert("Noop")},searchOnTable:function(){this.searched=ma(this.alunos,this.search)}},created:function(){this.searched=this.alunos},components:{"my-base":Q}},pa=fa,_a=(e("fad2"),Object(n["a"])(pa,la,ua,!1,null,"56ddb9ec",null)),va=_a.exports,ha=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("my-base",[e("div",{attrs:{slot:"my-content"},slot:"my-content"},[e("div",{staticClass:"md-layout md-gutter"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("md-card",[e("md-card-header",[e("md-card-header-text",[e("div",{staticClass:"md-title"},[a._v(a._s(a.aluno.nome))])]),e("md-button",{staticClass:"md-raised md-button-green",on:{click:function(t){return a.atualizar_aluno()}}},[a._v(" Atualizar "),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Atualizar aluno")])],1)],1),e("md-card-content",{staticClass:"md-scrollbar"},[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("CPF")]),e("md-input",{attrs:{name:"cpf"},model:{value:a.aluno.cpf,callback:function(t){a.$set(a.aluno,"cpf",t)},expression:"aluno.cpf"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Email")]),e("md-input",{attrs:{name:"email"},model:{value:a.aluno.email,callback:function(t){a.$set(a.aluno,"email",t)},expression:"aluno.email"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("div",{staticClass:"block",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"dataNasc"}},[a._v("Data Nascimento")]),e("md-datepicker",{model:{value:a.aluno.data_nascimento,callback:function(t){a.$set(a.aluno,"data_nascimento",t)},expression:"aluno.data_nascimento"}})],1)]),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Telefone")]),e("md-input",{attrs:{name:"telefone"},model:{value:a.aluno.telefone,callback:function(t){a.$set(a.aluno,"telefone",t)},expression:"aluno.telefone"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("md-divider"),e("h4",{staticStyle:{display:"inline-block"}},[a._v("Matrículas")]),e("md-button",{staticClass:"md-icon-button",staticStyle:{float:"right",background:"#448aff !important","margin-top":"15px"},on:{click:function(t){return a.recuperar_cursos()}}},[e("md-icon",{staticStyle:{color:"white !important"}},[a._v("add")]),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Adicionar Matrícula")])],1),e("md-list",{key:a.keyMatriculas},a._l(a.matriculas,(function(t){return e("md-list-item",{attrs:{"md-expand":"","md-expanded":t.expand},on:{"update:mdExpanded":function(e){return a.$set(t,"expand",e)},"update:md-expanded":function(e){return a.$set(t,"expand",e)}}},[e("span",{staticClass:"md-list-item-text"},[a._v(a._s(t.curso_descricao)+" - "+a._s(t.curso_nivel))]),e("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},[e("md-tabs",{attrs:{"md-alignment":"centered"}},[e("md-tab",{attrs:{id:"tab-home","md-label":"Informações"}},[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Nº Matrícula")]),e("md-input",{attrs:{name:"numero_matricula"},model:{value:t.numero_matricula,callback:function(e){a.$set(t,"numero_matricula",e)},expression:"m.numero_matricula"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("md-select",{attrs:{name:"status_matricula",placeholder:"Status Matrícula"},model:{value:t.status_matricula,callback:function(e){a.$set(t,"status_matricula",e)},expression:"m.status_matricula"}},[e("md-option",{attrs:{value:"em_andamento"}},[a._v("Em Andamento")]),e("md-option",{attrs:{value:"concluido"}},[a._v("Concluído")]),e("md-option",{attrs:{value:"cancelado"}},[a._v("Cancelado")]),e("md-option",{attrs:{value:"desistente"}},[a._v("Desistente")])],1)],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("div",{staticClass:"block",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"dataNasc"}},[a._v("Data Início")]),e("md-datepicker",{model:{value:t.data_inicio,callback:function(e){a.$set(t,"data_inicio",e)},expression:"m.data_inicio"}})],1)]),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("div",{staticClass:"block",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"dataNasc"}},[a._v("Data Conclusão")]),e("md-datepicker",{model:{value:t.data_fim,callback:function(e){a.$set(t,"data_fim",e)},expression:"m.data_fim"}})],1)])])]),e("div",{staticClass:"md-layout-item md-size-100",staticStyle:{"text-align":"center"}},[e("md-button",{staticClass:"md-raised md-button-green",on:{click:function(e){a.atualizar_matricula(t),a.showDialog=!0}}},[a._v(" Atualizar ")])],1)])]),e("md-tab",{attrs:{id:"tab-pages","md-label":"Ocupaçoes"}},[e("div",{key:a.keyOcupacoes,staticClass:"md-layout"},[a._l(t.ocupacoes,(function(t){return e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-list-item",[e("md-card-header-text",[null==t.data_fim?e("span",{staticClass:"md-list-item-text"},[a._v(a._s(t.local)+" iniciado em: "+a._s(t.data_inicio))]):a._e(),null!=t.data_fim?e("span",{staticClass:"md-list-item-text"},[a._v(a._s(t.local)+" ("+a._s(t.data_inicio)+" até "+a._s(t.data_fim)+")")]):a._e(),e("div",{staticClass:"md-subhead"},[a._v("Remunerado: "+a._s(1==t.eh_remunerado?"Sim":"Não"))])]),e("md-button",{staticClass:"md-icon-button md-list-action"},[e("md-icon",{staticClass:"md-primary"},[a._v("edit")])],1)],1)],1)])])})),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-50",staticStyle:{"text-align":"center"}},[e("md-button",{staticClass:"md-raised md-button-green",on:{click:function(e){a.$bus.$emit("cadastroOcupacao",{showDialogOcupacao:!0,matricula_selecionada:t}),a.matricula_selecionada=t}}},[a._v(" Adicionar "),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Adicionar Ocupação")])],1)],1)])])],2)])],1)],1)],1)})),1)],1)])])],1)],1)]),e("md-dialog",{attrs:{"md-active":a.showDialogMatricula},on:{"update:mdActive":function(t){a.showDialogMatricula=t},"update:md-active":function(t){a.showDialogMatricula=t}}},[e("md-card",{staticStyle:{width:"-webkit-fill-available",display:"grid"}},[e("md-card-header",[e("div",{staticClass:"md-title"},[a._v("Adicionar Matrícula")])]),e("form",{on:{submit:function(t){return t.preventDefault(),a.validateMatricula(t)}}},[e("md-card-content",[e("md-card-content",[e("div",{staticClass:"md-layout md-gutter",attrs:{id:"cadastroMatricula"}},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",{class:a.getValidationClass("curso_uid")},[e("md-select",{attrs:{name:"curso",placeholder:"Curso"},model:{value:a.matricula.curso_uid,callback:function(t){a.$set(a.matricula,"curso_uid",t)},expression:"matricula.curso_uid"}},a._l(a.cursos,(function(t){return e("md-option",{attrs:{value:t.uid}},[a._v(a._s(t.descricao))])})),1),a.$v.matricula.curso_uid.required?a._e():e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",{class:a.getValidationClass("numero_matricula")},[e("label",[a._v("Número Matrícula")]),e("md-input",{model:{value:a.matricula.numero_matricula,callback:function(t){a.$set(a.matricula,"numero_matricula",t)},expression:"matricula.numero_matricula"}}),a.$v.matricula.numero_matricula.required?e("span",{staticClass:"md-error"},[a._v("Descricao já existe")]):e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",{class:a.getValidationClass("status_matricula")},[e("md-select",{attrs:{name:"status_matricula",placeholder:"Status Matrícula"},model:{value:a.matricula.status_matricula,callback:function(t){a.$set(a.matricula,"status_matricula",t)},expression:"matricula.status_matricula"}},[e("md-option",{attrs:{value:"em_andamento"}},[a._v("Em Andamento")]),e("md-option",{attrs:{value:"concluido"}},[a._v("Concluído")]),e("md-option",{attrs:{value:"cancelado"}},[a._v("Cancelado")]),e("md-option",{attrs:{value:"desistente"}},[a._v("Desistente")])],1),a.$v.matricula.status_matricula.required?a._e():e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("div",{staticClass:"block",class:a.getValidationClass("data_inicio"),staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"dataNasc"}},[a._v("Data Inicio")]),e("md-datepicker",{model:{value:a.matricula.data_inicio,callback:function(t){a.$set(a.matricula,"data_inicio",t)},expression:"matricula.data_inicio"}})],1),a.$v.matricula.data_inicio.required?a._e():e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])])])])],1),e("md-card-actions",[e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.showDialogMatricula=!1}}},[a._v("Fechar")]),e("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[a._v("Salvar")])],1)],1)],1)],1),e("my-cadastro-ocupacao")],1)])},ga=[],ba=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("md-dialog",{attrs:{"md-active":a.showDialogOcupacao},on:{"update:mdActive":function(t){a.showDialogOcupacao=t},"update:md-active":function(t){a.showDialogOcupacao=t}}},[e("md-card",{staticStyle:{width:"-webkit-fill-available",display:"grid"}},[e("md-card-header",[e("div",{staticClass:"md-title"},[a._v("Adicionar Ocupação")])]),e("form",{on:{submit:function(t){return t.preventDefault(),a.validateOcupacao(t)}}},[e("md-card-content",[e("md-card-content",[e("div",{staticClass:"md-layout md-gutter",attrs:{id:"cadastroOcupacao"}},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",{class:a.getValidationOcupacaoClass("local")},[e("label",{attrs:{for:"matricula"}},[a._v("Local")]),e("md-input",{attrs:{name:"local"},model:{value:a.ocupacao.local,callback:function(t){a.$set(a.ocupacao,"local",t)},expression:"ocupacao.local"}}),a.$v.ocupacao.local.required?a._e():e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1),e("div",{staticClass:"md-layout-item md-size-50",class:a.getValidationOcupacaoClass("eh_remunerado")},[e("div",{staticClass:"md-body-2",attrs:{for:"snackbar-center"}},[a._v("É Remunerado")]),e("md-radio",{attrs:{value:"true"},model:{value:a.ocupacao.eh_remunerado,callback:function(t){a.$set(a.ocupacao,"eh_remunerado",t)},expression:"ocupacao.eh_remunerado"}},[a._v("Sim")]),e("md-radio",{attrs:{value:"false"},model:{value:a.ocupacao.eh_remunerado,callback:function(t){a.$set(a.ocupacao,"eh_remunerado",t)},expression:"ocupacao.eh_remunerado"}},[a._v("Não")]),a.$v.ocupacao.eh_remunerado.required?a._e():e("span",{staticClass:"md-error",staticStyle:{display:"block",color:"red","font-size":"12px"}},[a._v("Campo obrigatório")])],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("div",{staticClass:"block",class:a.getValidationOcupacaoClass("data_inicio"),staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"DataInicio"}},[a._v("Data Inicio")]),e("md-datepicker",{model:{value:a.ocupacao.data_inicio,callback:function(t){a.$set(a.ocupacao,"data_inicio",t)},expression:"ocupacao.data_inicio"}})],1),a.$v.ocupacao.data_inicio.required?a._e():e("span",{staticClass:"md-error",staticStyle:{color:"red","font-size":"12px"}},[a._v("Campo obrigatório")])]),e("div",{staticClass:"md-layout-item md-size-50"},[e("div",{staticClass:"block",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"dataFim"}},[a._v("Data Fim")]),e("md-datepicker",{model:{value:a.ocupacao.data_fim,callback:function(t){a.$set(a.ocupacao,"data_fim",t)},expression:"ocupacao.data_fim"}})],1)])])])],1),e("md-card-actions",[e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.showDialogOcupacao=!1}}},[a._v("Fechar")]),e("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[a._v("Salvar")])],1)],1)],1)],1)],1)},Ca=[],ya=(e("4d90"),{mixins:[y["validationMixin"]],data:function(){return{showDialogOcupacao:!1,ocupacao:{local:"",matricula_uid:"",eh_remunerado:"",data_inicio:"",data_fim:null},matricula_selecionada:""}},validations:{ocupacao:{local:{required:w["required"]},data_inicio:{required:w["required"]},eh_remunerado:{required:w["required"]}}},created:function(){var a=this;console.log("aquii"),this.$bus.$on("cadastroOcupacao",(function(t){return a.showDialogOcupacao=t["showDialogOcupacao"],a.matricula_selecionada=t["matricula_selecionada"]}))},methods:{getValidationOcupacaoClass:function(a){var t=this,e=t.$v.ocupacao[a];if(e)return{"md-invalid":e.$invalid&&e.$dirty}},validateOcupacao:function(){this.$v.$touch(),this.$v.$invalid||this.salvar_ocupacao()},salvar_ocupacao:function(){var a=this,t=d["a"].firestore();t.collection("ocupacao").add({matricula_uid:a.matricula_selecionada.id,local:a.ocupacao.local,eh_renumerado:a.ocupacao.eh_remunerado,data_inicio:d["a"].firestore.Timestamp.fromDate(new Date(a.ocupacao.data_inicio)),data_fim:null!=a.ocupacao.data_fim?d["a"].firestore.Timestamp.fromDate(new Date(a.ocupacao.data_fim)):null}).then((function(t){alert("Ocupação adicionada!");var e={uid:"",local:"",data_inicio:"",data_fim:null,eh_remunerado:""};if(e.uid=t.id,e.local=a.ocupacao.local,e.data_inicio=a.ocupacao.data_inicio,null!=a.ocupacao.data_fim){var o=["01","02","03","04","05","06","07","08","09","10","11","12"];e.data_fim=a.ocupacao.data_fim.getFullYear()+"-"+o[a.ocupacao.data_fim.getMonth()]+"-"+String(a.ocupacao.data_fim.getDate()).padStart(2,"0")}e.eh_remunerado=a.ocupacao.eh_remunerado,a.showDialogOcupacao=!1,a.$bus.$emit("adicionar_ocupacao",e)})).catch((function(a){window.alert("A Ocupação não foi Cadastrada!")}))}}}),wa=ya,xa=(e("9aeb"),Object(n["a"])(wa,ba,Ca,!1,null,"7d2f3e1e",null)),za=xa.exports,ka={mixins:[y["validationMixin"]],data:function(){return{aluno:{uid:"",nome:"",data_nascimento:"",email:"",cpf:"",telefone:"",pessoa_uid:""},matriculas:[],showDialogMatricula:!1,matricula:{aluno_uid:"",data_cadastro:"",data_fim:"",curso_uid:"",data_inicio:"",numero_matricula:"",status_matricula:"",curso_descricao:"",curso_nivel:"",expand:!1,ocupacoes:[]},numeroMatriculaValida:!1,cursos:[],keyMatriculas:0,keyOcupacoes:0,matricula_selecionada:{}}},validations:{matricula:{numero_matricula:{required:w["required"],numeroValido:function(a){return this.validarNumeroMatricula(a),this.numeroMatriculaValida}},status_matricula:{required:w["required"]},data_inicio:{required:w["required"]},curso_uid:{required:w["required"]}}},created:function(){var a=this;this.$bus.$on("adicionar_ocupacao",(function(t){return a.adicionar_ocupacao(t)}))},mounted:function(){this.recuperarAluno(localStorage.getItem("aluno_uid"))},methods:{adicionar_ocupacao:function(a){this.matricula_selecionada.ocupacoes.push(a),this.keyOcupacoes+=1},recuperarAluno:function(a){var t=this;t.aluno.uid=a;var e=d["a"].firestore();e.collection("aluno").doc(a).get().then((function(a){t.aluno.pessoa_uid=a.data().pessoa_uid,t.recuperarPessoa(a.data().pessoa_uid)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarPessoa:function(a){var t=this,e=d["a"].firestore();e.collection("pessoa").doc(a).get().then((function(a){t.aluno.data_nascimento=JSON.stringify(a.data().data_nascimento.toDate()).slice(1,11),t.aluno.nome=a.data().nome,t.aluno.email=a.data().email,t.aluno.cpf=a.data().cpf,t.aluno.telefone=a.data().telefone,t.recuperarMatriculas(t.aluno.uid)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarMatriculas:function(a){var t=this,e=d["a"].firestore();e.collection("matricula").where("aluno_uid","==",a).get().then((function(a){a.forEach((function(a){var e={id:"",numero_matricula:"",curso_uid:"",data_inicio:"",data_fim:null,status_matricula:"",curso_descricao:"",curso_nivel:"",ocupacoes:[],expand:!1};e.id=a.id,e.numero_matricula=a.data().numero_matricula,e.curso_uid=a.data().curso_uid,e.data_inicio=JSON.stringify(a.data().data_inicio.toDate()).slice(1,11),null!=a.data().data_fim&&(e.data_fim=JSON.stringify(a.data().data_fim.toDate()).slice(1,11)),e.status_matricula=a.data().status_matricula,t.recuperarCurso(e)}))})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarCurso:function(a){var t=this,e=d["a"].firestore();e.collection("curso").doc(a.curso_uid).get().then((function(e){a.curso_descricao=e.data().descricao,a.curso_nivel=e.data().nivel,"tecnologo"==a.curso_nivel?a.curso_nivel="Tecnólogo":"medio_integrado"==a.curso_nivel?a.curso_nivel="Médio integrado":"tecnico"==a.curso_nivel?a.curso_nivel="Técnico":"bacharel"==a.curso_nivel?a.curso_nivel="Bacharel":"licenciatura"==a.curso_nivel&&(a.curso_nivel="Licenciatura"),t.recuperarOcupacoes(a)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarOcupacoes:function(a){var t=this,e=d["a"].firestore();e.collection("ocupacao").where("matricula_uid","==",a.id).get().then((function(e){e.forEach((function(t){var e={uid:"",local:"",data_inicio:"",data_fim:null,eh_remunerado:""};e.uid=t.id,e.local=t.data().local,e.data_inicio=JSON.stringify(t.data().data_inicio.toDate()).slice(1,11),null!=t.data().data_fim&&(e.data_fim=JSON.stringify(t.data().data_fim.toDate()).slice(1,11)),e.eh_remunerado=t.data().eh_remunerado,a.ocupacoes.push(e)})),t.matriculas.push(a)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},atualizar_aluno:function(){var a=d["a"].firestore();a.collection("pessoa").doc(this.aluno.pessoa_uid).update({cpf:this.aluno.cpf,email:this.aluno.email,telefone:this.aluno.telefone,data_nascimento:d["a"].firestore.Timestamp.fromDate(new Date(this.aluno.data_nascimento))}).then((function(){alert("Aluno atualizado!")})).catch((function(a){alert("Erro ao atualizar aluno: ",a)}))},atualizar_matricula:function(a){var t=d["a"].firestore();t.collection("matricula").doc(a.id).update({numero_matricula:a.numero_matricula,status_matricula:a.status_matricula,data_inicio:d["a"].firestore.Timestamp.fromDate(new Date(a.data_inicio)),data_fim:null!=a.data_fim?d["a"].firestore.Timestamp.fromDate(new Date(a.data_fim)):null}).then((function(){alert("Matrícula atualizada!")})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperar_cursos:function(){var a=this,t=d["a"].firestore();t.collection("curso").get().then((function(t){t.forEach((function(t){var e={uid:"",descricao:"",nivel:""};e.uid=t.id,e.descricao=t.data().descricao,e.nivel=t.data().nivel,a.cursos.push(e)})),a.showDialogMatricula=!0})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},getValidationClass:function(a){var t=this,e=t.$v.matricula[a];if(e)return{"md-invalid":e.$invalid&&e.$dirty}},validateMatricula:function(){this.$v.$touch(),this.$v.$invalid||this.salvar_matricula()},salvar_matricula:function(){var a=this,t=this,e=d["a"].firestore();e.collection("matricula").add({aluno_uid:this.aluno.uid,curso_uid:this.matricula.curso_uid,data_cadastro:d["a"].firestore.Timestamp.fromDate(new Date),data_inicio:d["a"].firestore.Timestamp.fromDate(new Date(this.matricula.data_inicio)),data_fim:null,numero_matricula:this.matricula.numero_matricula,status_matricula:this.matricula.status_matricula}).then((function(e){var o=a.cursos.filter((function(a){return a.uid==t.matricula.curso_uid})),i={id:"",numero_matricula:"",curso_uid:"",data_inicio:"",data_fim:null,status_matricula:"",curso_descricao:"",curso_nivel:"",ocupacoes:[],expand:!1};i.id=e.id,i.numero_matricula=t.matricula.numero_matricula,i.curso_uid=t.matricula.curso_uid,i.data_inicio=t.matricula.data_inicio,i.status_matricula=t.matricula.status_matricula,i.curso_descricao=o[0].descricao,"tecnologo"==o[0].nivel?i.curso_nivel="Tecnólogo":"medio_integrado"==o[0].nivel?i.curso_nivel="Médio integrado":"tecnico"==o[0].nivel?i.curso_nivel="Técnico":"bacharel"==o[0].nivel?i.curso_nivel="Bacharel":"licenciatura"==o[0].nivel&&(i.curso_nivel="Licenciatura"),i.expand=!1,i.ocupacoes=[],t.matriculas.push(i),t.keyMatriculas+=1,t.showDialogMatricula=!1})).catch((function(a){window.alert("A matrícula não foi Cadastrado!")}))},validarNumeroMatricula:function(a){var t=this,e=d["a"].firestore();e.collection("matricula").where("numero_matricula","==",a).get().then((function(a){0==a.docs.length?t.numeroMatriculaValida=!0:t.numeroMatriculaValida=!1})).catch((function(a){console.log("Erro ao recuperar usuario: ",a)}))}},components:{"my-base":Q,"my-cadastro-ocupacao":za}},Sa=ka,Da=(e("db78"),Object(n["a"])(Sa,ha,ga,!1,null,"05f68f06",null)),Ea=Da.exports,Oa=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("my-base",[e("div",{attrs:{slot:"my-content"},slot:"my-content"},[e("div",[e("md-table",{attrs:{"md-sort":"name","md-sort-order":"asc","md-card":"","md-fixed-header":""},scopedSlots:a._u([{key:"md-table-row",fn:function(t){var o=t.item;return e("md-table-row",{},[e("md-table-cell",{staticClass:"cursor",attrs:{"md-label":"Sequencia","md-sort-by":"id","md-numeric":""},nativeOn:{click:function(t){return a.curso_detail(o)}}},[a._v(a._s(o.id))]),e("md-table-cell",{staticClass:"cursor",attrs:{"md-label":"Nome","md-sort-by":"descricao"},nativeOn:{click:function(t){return a.curso_detail(o)}}},[a._v(a._s(o.descricao))]),e("md-table-cell",{staticClass:"cursor",attrs:{"md-label":"Nível","md-sort-by":"nivel"},nativeOn:{click:function(t){return a.curso_detail(o)}}},[a._v(a._s(o.nivel))])],1)}}]),model:{value:a.searched,callback:function(t){a.searched=t},expression:"searched"}},[e("md-table-toolbar",[e("div",{staticClass:"md-toolbar-section-start"},[e("h1",{staticClass:"md-title"},[a._v("Cursos")])]),e("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[e("md-input",{attrs:{placeholder:"Pesquisar por nome..."},on:{input:a.searchOnTable},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1)],1),e("md-table-empty-state",{attrs:{"md-label":"Nenhum curso encontrado","md-description":"Nenhum curso encontrado para esta consulta '"+a.search+"'. Tente um nome de curso diferente."}})],1)],1),e("md-button",{staticClass:"md-fab md-primary",attrs:{id:"botao_adicionar"},on:{click:function(t){a.showDialog=!0}}},[e("md-icon",[a._v("add")])],1),e("md-dialog",{attrs:{"md-active":a.showDialog},on:{"update:mdActive":function(t){a.showDialog=t},"update:md-active":function(t){a.showDialog=t}}},[e("md-card",[e("md-card-header",[e("div",{staticClass:"md-title"},[a._v("Adicionar Curso")])]),e("form",{on:{submit:function(t){return t.preventDefault(),a.validateCurso(t)}}},[e("md-card-content",[e("md-card-content",[e("div",{staticClass:"md-layout md-gutter",attrs:{id:"cadastro"}},[e("div",{staticClass:"md-layout-item md-size-70"},[e("md-field",{class:a.getValidationClass("descricao")},[e("label",[a._v("Descricao")]),e("md-input",{model:{value:a.curso.descricao,callback:function(t){a.$set(a.curso,"descricao",t)},expression:"curso.descricao"}}),a.$v.curso.descricao.required?e("span",{staticClass:"md-error"},[a._v("Descricao já existe")]):e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1),e("div",{staticClass:"md-layout-item md-size-70"},[e("md-field",{class:a.getValidationClass("nivel")},[e("label",[a._v("Nível")]),e("md-select",{attrs:{name:"nivel"},model:{value:a.curso.nivel,callback:function(t){a.$set(a.curso,"nivel",t)},expression:"curso.nivel"}},[e("md-option",{attrs:{value:"tecnico"}},[a._v("Técnico")]),e("md-option",{attrs:{value:"medio_integrado"}},[a._v("Médio Integrado")]),e("md-option",{attrs:{value:"tecnologo"}},[a._v("Técnologo")]),e("md-option",{attrs:{value:"bacharel"}},[a._v("Bacharel")]),e("md-option",{attrs:{value:"licenciatura"}},[a._v("licenciatura")])],1),a.$v.curso.nivel.required?a._e():e("span",{staticClass:"md-error"},[a._v("Campo obrigatório")])],1)],1)])])],1),e("md-card-actions",[e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.showDialog=!1}}},[a._v("Fechar")]),e("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit"}},[a._v("Salvar")])],1)],1)],1)],1)],1)])},Aa=[],$a=function(a){return a.toString().toLowerCase()},Pa=function(a,t){return t?a.filter((function(a){return $a(a.descricao).includes($a(t))})):a},Ma={mixins:[y["validationMixin"]],data:function(){return{search:null,searched:[],cursos:[],showDialog:!1,curso:{descricao:"",nivel:""},descricaoValida:!1}},validations:{curso:{descricao:{required:w["required"],descricaoValida:function(a){return this.validarDescricaoCurso(a),this.descricaoValida}},nivel:{required:w["required"]}}},mounted:function(){console.log(localStorage.getItem("cursos")),"admin"==localStorage.getItem("perfil_usuario")?this.recuperarCursos():this.recuperarFuncionario()},methods:{recuperarFuncionario:function(){var a=this,t=d["a"].firestore();t.collection("funcionario").where("pessoa_uid","==",localStorage.getItem("pessoa_logada_uid")).get().then((function(t){a.recuperarCursoFuncionario(t.docs[0].id)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarCursoFuncionario:function(a){var t=this,e=d["a"].firestore();e.collection("cursoFuncionario").where("funcionario_uid","==",a).get().then((function(a){a.forEach((function(a){t.recuperarCurso(a.data().curso_uid)}))})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarCurso:function(a){var t=this,e=d["a"].firestore();e.collection("curso").doc(a).get().then((function(a){var e={id:t.cursos.length+1,uid:a.id,descricao:a.data().descricao,nivel:a.data().nivel};"tecnologo"==e.nivel?e.nivel="Tecnólogo":"medio_integrado"==e.nivel?e.nivel="Médio integrado":"tecnico"==e.nivel?e.nivel="Técnico":"bacharel"==e.nivel?e.nivel="Bacharel":"licenciatura"==e.nivel&&(e.nivel="Licenciatura"),t.cursos.push(e)})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},recuperarCursos:function(){var a=this,t=d["a"].firestore();t.collection("curso").get().then((function(t){t.forEach((function(t){var e={id:a.cursos.length+1,uid:t.id,descricao:t.data().descricao,nivel:t.data().nivel};"tecnologo"==e.nivel?e.nivel="Tecnólogo":"medio_integrado"==e.nivel?e.nivel="Médio integrado":"tecnico"==e.nivel?e.nivel="Técnico":"bacharel"==e.nivel?e.nivel="Bacharel":"licenciatura"==e.nivel&&(e.nivel="Licenciatura"),a.cursos.push(e)}))}))},getValidationClass:function(a){var t=this.$v.curso[a];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateCurso:function(){this.$v.$touch(),this.$v.$invalid||this.salvar_curso()},salvar_curso:function(){var a=d["a"].firestore();a.collection("curso").add({descricao:this.curso.descricao,nivel:this.curso.nivel}).then((function(){window.alert("Curso Cadastrado Com sucesso!")})).catch((function(a){window.alert("O curso não foi Cadastrado!")}))},validarDescricaoCurso:function(a){var t=this,e=d["a"].firestore();e.collection("curso").where("descricao","==",a).get().then((function(a){0==a.docs.length?t.descricaoValida=!0:t.descricaoValida=!1})).catch((function(a){console.log("Erro ao recuperar usuario: ",a)}))},searchOnTable:function(){this.searched=Pa(this.cursos,this.search)},curso_detail:function(a){localStorage.setItem("title","cursos"),localStorage.setItem("curso_uid",a.uid),window.location.replace("/curso/detalhes")}},created:function(){this.searched=this.cursos},components:{"my-base":Q}},qa=Ma,Fa=(e("f6c7"),Object(n["a"])(qa,Oa,Aa,!1,null,"abc34dc0",null)),Na=Fa.exports,Ia=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("my-base",[e("div",{attrs:{slot:"my-content"},slot:"my-content"},[e("div",{staticClass:"md-layout md-gutter"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("md-card",[e("md-card-header",[e("md-card-header-text",[e("div",{staticClass:"md-title"},[a._v(a._s(a.curso.descricao)+" - "+a._s(a.curso.nivel))])])],1),e("md-card-content",{staticClass:"md-scrollbar"},[e("md-tabs",{attrs:{"md-alignment":"centered"}},[e("md-tab",{attrs:{id:"tab-professores","md-label":"Professores"}},[e("md-table",{key:a.keyProfessores,attrs:{"md-sort":"nome","md-sort-order":"asc","md-card":""},scopedSlots:a._u([{key:"md-table-row",fn:function(t){var o=t.item;return e("md-table-row",{},[e("md-table-cell",{attrs:{"md-label":"Name","md-sort-by":"name"}},[a._v(a._s(o.nome))]),e("md-table-cell",{attrs:{"md-label":"CPF","md-sort-by":"cpf"}},[a._v(a._s(o.cpf))]),e("md-table-cell",{attrs:{"md-label":"Email","md-sort-by":"email"}},[a._v(a._s(o.email))]),e("md-table-cell",{attrs:{"md-label":"Telefone","md-sort-by":"telefone"}},[a._v(a._s(o.telefone))])],1)}}]),model:{value:a.professores,callback:function(t){a.professores=t},expression:"professores"}}),e("md-button",{staticClass:"md-raised md-button-green",on:{click:function(t){a.showDialog=!0,a.cargo="professor"}}},[a._v(" Adiconar "),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Adicionar Professor")])],1)],1),e("md-tab",{attrs:{id:"tab-coordenador","md-label":"Coordenador"}},[e("md-table",{key:a.keyCoordenador,attrs:{"md-sort":"nome","md-sort-order":"asc","md-card":""},scopedSlots:a._u([{key:"md-table-row",fn:function(t){var o=t.item;return e("md-table-row",{},[e("md-table-cell",{attrs:{"md-label":"Name","md-sort-by":"name"}},[a._v(a._s(o.nome))]),e("md-table-cell",{attrs:{"md-label":"CPF","md-sort-by":"cpf"}},[a._v(a._s(o.cpf))]),e("md-table-cell",{attrs:{"md-label":"Email","md-sort-by":"email"}},[a._v(a._s(o.email))]),e("md-table-cell",{attrs:{"md-label":"Telefone","md-sort-by":"telefone"}},[a._v(a._s(o.telefone))])],1)}}]),model:{value:a.coordenadores,callback:function(t){a.coordenadores=t},expression:"coordenadores"}}),e("md-button",{staticClass:"md-raised md-button-green",on:{click:function(t){a.showDialog=!0,a.cargo="coordenador"}}},[a._v(" Adiconar "),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Adicionar Coordenador")])],1)],1),e("md-tab",{attrs:{id:"tab-alunos","md-label":"Alunos"}},[e("md-table",{attrs:{"md-sort":"nome","md-sort-order":"asc","md-card":""},scopedSlots:a._u([{key:"md-table-row",fn:function(t){var o=t.item;return e("md-table-row",{},[e("md-table-cell",{attrs:{"md-label":"Name","md-sort-by":"name"}},[a._v(a._s(o.nome))]),e("md-table-cell",{attrs:{"md-label":"CPF","md-sort-by":"cpf"}},[a._v(a._s(o.cpf))]),e("md-table-cell",{attrs:{"md-label":"Email","md-sort-by":"email"}},[a._v(a._s(o.email))]),e("md-table-cell",{attrs:{"md-label":"Telefone","md-sort-by":"telefone"}},[a._v(a._s(o.telefone))])],1)}}]),model:{value:a.alunos,callback:function(t){a.alunos=t},expression:"alunos"}})],1)],1)],1)],1)],1)]),e("md-dialog",{attrs:{"md-active":a.showDialog},on:{"update:mdActive":function(t){a.showDialog=t},"update:md-active":function(t){a.showDialog=t}}},[e("md-card",{staticStyle:{width:"-webkit-fill-available",display:"grid"}},[e("md-card-header",["professor"==a.cargo?e("div",{staticClass:"md-title"},[a._v("Adicionar Professor")]):a._e(),"coordenador"==a.cargo?e("div",{staticClass:"md-title"},[a._v("Adicionar Coordenador")]):a._e()]),e("md-card-content",[e("md-card-content",[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-70"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Nome")]),e("md-input",{attrs:{name:"cpf"},model:{value:a.funcionario.nome,callback:function(t){a.$set(a.funcionario,"nome",t)},expression:"funcionario.nome"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-30"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("CPF")]),e("md-input",{attrs:{name:"cpf"},model:{value:a.funcionario.cpf,callback:function(t){a.$set(a.funcionario,"cpf",t)},expression:"funcionario.cpf"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-30"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Email")]),e("md-input",{attrs:{name:"email"},model:{value:a.funcionario.email,callback:function(t){a.$set(a.funcionario,"email",t)},expression:"funcionario.email"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-30"},[e("div",{staticClass:"block",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"dataNasc"}},[a._v("Data Nascimento")]),e("md-datepicker",{model:{value:a.funcionario.data_nascimento,callback:function(t){a.$set(a.funcionario,"data_nascimento",t)},expression:"funcionario.data_nascimento"}})],1)]),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-30"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Telefone")]),e("md-input",{attrs:{name:"telefone"},model:{value:a.funcionario.telefone,callback:function(t){a.$set(a.funcionario,"telefone",t)},expression:"funcionario.telefone"}})],1)],1)])])])])],1),e("md-card-actions",{staticStyle:{"justify-content":"center"}},[e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.showDialog=!1}}},[a._v("Fechar")]),e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){return a.adicionar_profissional()}}},[a._v("Adicionar")])],1)],1)],1)],1)])},Ta=[],ja={data:function(){return{curso:{},quantFuncionario:0,keyProfessores:0,professores:[],keyCoordenador:0,coordenadores:[],cargo:"",alunos:[],showDialog:!1,funcionario:{nome:"",email:"",cpf:"",telefone:"",data_nascimento:""}}},mounted:function(){console.log(localStorage.getItem("title")),this.recuperarCurso(localStorage.getItem("curso_uid"))},methods:{recuperarCurso:function(a){var t=this;t.curso.uid=a;var e=d["a"].firestore();e.collection("curso").doc(a).get().then((function(a){t.curso=a.data(),t.curso.uid=a.id,t.cargo="professor",t.recuperarCursoFuncionario()})).catch((function(a){console.log("Erro ao recuperar Curso.",a)}))},recuperarCursoFuncionario:function(){var a=this,t=d["a"].firestore();t.collection("cursoFuncionario").where("curso_uid","==",a.curso.uid).where("cargo","==",a.cargo).get().then((function(t){a.quantFuncionario=t.size,t.forEach((function(t){a.recuperarFuncionario(t.data().funcionario_uid)}))})).catch((function(a){console.log("Erro ao recuperar Professor: ",a)}))},recuperarFuncionario:function(a){var t=this,e=d["a"].firestore();e.collection("funcionario").doc(a).get().then((function(a){t.recuperarPessoa(a.data().pessoa_uid)})).catch((function(a){console.log("Erro ao recuperar Professor: ",a)}))},recuperarPessoa:function(a){var t=this,e=d["a"].firestore();e.collection("pessoa").doc(a).get().then((function(a){var e=a.data();e.uid=a.id,"professor"==t.cargo?(t.professores.push(e),t.quantFuncionario==t.professores.length&&(t.cargo="coordenador",t.recuperarCursoFuncionario())):"coordenador"==t.cargo?(t.coordenadores.push(e),t.quantFuncionario==t.coordenadores.length&&(t.cargo="aluno",t.recuperarAlunos())):t.alunos.push(e)})).catch((function(a){console.log("Erro ao recuperar Professor: ",a)}))},recuperarAlunos:function(){var a=this,t=d["a"].firestore();t.collection("matricula").where("curso_uid","==",a.curso.uid).get().then((function(t){a.quantFuncionario=t.size,t.forEach((function(t){a.recuperarAluno(t.data().aluno_uid)}))})).catch((function(a){console.log("Erro ao recuperar Alunos: ",a)}))},recuperarAluno:function(a){var t=this,e=d["a"].firestore();e.collection("aluno").doc(a).get().then((function(a){t.recuperarPessoa(a.data().pessoa_uid)})).catch((function(a){console.log("Erro ao recuperar Aluno: ",a)}))},adicionar_profissional:function(){var a=this,t=d["a"].firestore();t.collection("pessoa").add({nome:this.funcionario.nome,cpf:this.funcionario.cpf,email:this.funcionario.email,telefone:this.funcionario.telefone,data_nascimento:d["a"].firestore.Timestamp.fromDate(new Date(this.funcionario.data_nascimento)),data_cadastro:d["a"].firestore.Timestamp.fromDate(new Date)}).then((function(t){a.savar_funcionario(t.id)})).catch((function(a){}))},savar_funcionario:function(a){var t=this,e=d["a"].firestore();e.collection("funcionario").add({pessoa_uid:a,data_cadastro:d["a"].firestore.Timestamp.fromDate(new Date)}).then((function(a){t.savar_cursoFuncionario(a.id)})).catch((function(a){}))},savar_cursoFuncionario:function(a){var t=this,e=d["a"].firestore();e.collection("cursoFuncionario").add({funcionario_uid:a,curso_uid:t.curso.uid,cargo:t.cargo}).then((function(){"professor"==t.cargo?(t.professores.push(t.funcionario),t.keyProfessores+=1):(t.coordenadores.push(t.funcionario),t.keyCoordenador+=1),t.funcionario={nome:"",email:"",cpf:"",telefone:"",data_nascimento:""},t.showDialog=!1})).catch((function(a){}))}},components:{"my-base":Q}},Va=ja,Ra=(e("5c2b"),Object(n["a"])(Va,Ia,Ta,!1,null,"3827361c",null)),Ja=Ra.exports,Ua=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("my-base",[e("div",{attrs:{slot:"my-content"},slot:"my-content"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-50 md-medium-size-50 md-small-size-100 md-xsmall-size-100"},[e("md-card",[e("md-card-header",[e("div",{staticClass:"md-title"},[a._v("Relatórios")])]),e("md-card-content",[e("md-list",[e("md-list-item",[e("md-card-header-text",[e("span",{staticClass:"md-list-item-text"},[a._v("Relação de alunos por curso")])]),e("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(t){a.showDialogAlunosPorCurso=!0}}},[e("md-icon",{staticClass:"md-primary"},[a._v("arrow_downward")]),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Gerar Relatório")])],1)],1),e("md-list-item",[e("md-card-header-text",[e("span",{staticClass:"md-list-item-text"},[a._v("Alunos que possuem/não possuem ocupação")])]),e("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(t){a.showDialogAlunosPorOcupacao=!0}}},[e("md-icon",{staticClass:"md-primary"},[a._v("arrow_downward")]),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Gerar Relatório")])],1)],1)],1)],1)],1)],1)]),e("md-dialog",{attrs:{"md-active":a.showDialogAlunosPorCurso},on:{"update:mdActive":function(t){a.showDialogAlunosPorCurso=t},"update:md-active":function(t){a.showDialogAlunosPorCurso=t}}},[e("md-card",{staticStyle:{width:"-webkit-fill-available",display:"grid"}},[e("md-card-header",[e("div",{staticClass:"md-title"},[a._v("Relação de alunos por curso")]),e("div",{staticStyle:{float:"right"}},[e("span",{staticClass:"md-list-item-text"},[a._v("* campo obrigatório")])])]),e("form",[e("md-card-content",[e("md-card-content",[e("div",{staticClass:"md-layout md-gutter"},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",[e("md-select",{attrs:{name:"curso",placeholder:"* Curso"},model:{value:a.curso_uid,callback:function(t){a.curso_uid=t},expression:"curso_uid"}},a._l(a.cursos,(function(t){return e("md-option",{attrs:{value:t.uid}},[a._v(a._s(t.descricao))])})),1)],1)],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",[e("md-select",{attrs:{name:"status_matricula",placeholder:"Status Matrícula"},model:{value:a.matricula.status_matricula,callback:function(t){a.$set(a.matricula,"status_matricula",t)},expression:"matricula.status_matricula"}},[e("md-option",{attrs:{value:"em_andamento"}},[a._v("Em Andamento")]),e("md-option",{attrs:{value:"concluido"}},[a._v("Concluído")]),e("md-option",{attrs:{value:"cancelado"}},[a._v("Cancelado")]),e("md-option",{attrs:{value:"desistente"}},[a._v("Desistente")])],1)],1)],1)])])],1),e("md-card-actions",[e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.showDialogAlunosPorCurso=!1}}},[a._v("Fechar")]),e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){return a.recuperarAlunosPorCurso()}}},[a._v("Gerar")])],1)],1)],1)],1),e("md-dialog",{attrs:{"md-active":a.showDialogAlunosPorOcupacao},on:{"update:mdActive":function(t){a.showDialogAlunosPorOcupacao=t},"update:md-active":function(t){a.showDialogAlunosPorOcupacao=t}}},[e("md-card",{staticStyle:{width:"-webkit-fill-available",display:"grid"}},[e("md-card-header",[e("div",{staticClass:"md-title"},[a._v("Alunos que possuem/não possuem ocupação")]),e("div",{staticStyle:{float:"right"}},[e("span",{staticClass:"md-list-item-text"},[a._v("* campo obrigatório")])])]),e("form",[e("md-card-content",[e("md-card-content",[e("div",{staticClass:"md-layout md-gutter"},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",[e("md-select",{attrs:{name:"curso",placeholder:"* Curso"},model:{value:a.curso_uid,callback:function(t){a.curso_uid=t},expression:"curso_uid"}},a._l(a.cursos,(function(t){return e("md-option",{attrs:{value:t.uid}},[a._v(a._s(t.descricao))])})),1)],1)],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",[e("md-select",{attrs:{placeholder:"Aluno possui ocupação?"},model:{value:a.matricula.possuiOcupacao,callback:function(t){a.$set(a.matricula,"possuiOcupacao",t)},expression:"matricula.possuiOcupacao"}},[e("md-option",{attrs:{value:"sim"}},[a._v("Sim")]),e("md-option",{attrs:{value:"nao"}},[a._v("Não")])],1)],1)],1),e("div",{staticClass:"md-layout-item md-size-50"})])])],1),e("md-card-actions",[e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.showDialogAlunosPorOcupacao=!1}}},[a._v("Fechar")]),e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){return a.recuperarAlunosPorOcupacao()}}},[a._v("Gerar")])],1)],1)],1)],1)],1)])},La=[],Ba=e("ade3"),Ya=e("8baf"),Ga=(e("0da4"),{data:function(){return{showDialogAlunosPorCurso:!1,cursos:[],matricula:{status_matricula:"",possuiOcupacao:""},curso_uid:"",alunos:[],quant_matricula:0,showDialogAlunosPorOcupacao:!1,ocupacoes:[],quant_ocupacoes:0,matriculas_com_ocupacao:[]}},mounted:function(){console.log("aquii"),this.recuperar_cursos()},methods:{recuperar_cursos:function(){var a=this,t=d["a"].firestore();t.collection("curso").get().then((function(t){t.forEach((function(t){var e={uid:"",descricao:"",nivel:""};e.uid=t.id,e.descricao=t.data().descricao,e.nivel=t.data().nivel,a.cursos.push(e)}))})).catch((function(a){console.log("Erro ao recuperar cursos: ",a)}))},recuperarAlunosPorCurso:function(){if(""!=this.curso_uid){this.alunos=[];var a=this,t=d["a"].firestore(),e=t.collection("matricula").where("curso_uid","==",a.curso_uid);""!=a.matricula.status_matricula&&(e=e.where("status_matricula","==",a.matricula.status_matricula)),e.get().then((function(t){a.quant_matricula=t.size,t.forEach((function(t){var e={numero_matricula:"",nome:"",cpf:"",email:"",telefone:"",status_matricula:""};e.numero_matricula=t.data().numero_matricula,""==a.matricula.status_matricula&&("em_andamento"==t.data().status_matricula?e.status_matricula="Em Andamento":"concluido"==t.data().status_matricula?e.status_matricula="Concluído":"cancelado"==t.data().status_matricula?e.status_matricula="Cancelado":"desistente"==t.data().status_matricula&&(e.status_matricula="Desistente")),a.recuperarAluno(t.data().aluno_uid,e)}))})).catch((function(a){console.log("Erro ao recuperar Cursos: ",a)}))}else alert("O curso é obrigatório!")},recuperarAluno:function(a,t){var e=this,o=d["a"].firestore();o.collection("aluno").doc(a).get().then((function(a){e.recuperarPessoa(a.data().pessoa_uid,t)})).catch((function(a){console.log("Erro ao recuperar aluno: ",a)}))},recuperarPessoa:function(a,t){var e=this,o=d["a"].firestore();o.collection("pessoa").doc(a).get().then((function(a){t.nome=a.data().nome,t.email=a.data().email,t.cpf=a.data().cpf,t.telefone=a.data().telefone,e.alunos.push(t),e.alunos.length==e.quant_matricula&&e.gerarRelatorioAlunosPorCurso()})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},gerarRelatorioAlunosPorCurso:function(){var a=this,t=this.cursos.filter((function(t){return t.uid==a.curso_uid})),e=new Ya["default"];e.setFontSize(12),e.text("Relatório de Alunos de "+t[0].descricao,105,20,null,null,"center");var o="";""!=a.matricula.status_matricula&&("em_andamento"==a.matricula.status_matricula?o="Em Andamento":"concluido"==a.matricula.status_matricula?o="Concluído":"cancelado"==a.matricula.status_matricula?o="Cancelado":"desistente"==a.matricula.status_matricula&&(o="Desistente"),e.setFontSize(11),e.text("Status Matrícula: "+o,200,30,null,null,"right"));e.internal.pageSize.width;var i=[],s=0;if(""!=a.matricula.status_matricula){for(s in this.alunos){var r=[this.alunos[s].nome,this.alunos[s].cpf,this.alunos[s].numero_matricula,this.alunos[s].email,this.alunos[s].telefone];i.push(r)}e.autoTable({head:[["Nome","CPF","Nº da Matricula","E-mail","Telefone"]],body:i,margin:{top:35}})}else{for(s in this.alunos){r=[this.alunos[s].nome,this.alunos[s].cpf,this.alunos[s].numero_matricula,this.alunos[s].status_matricula,this.alunos[s].email,this.alunos[s].telefone];i.push(r)}e.autoTable({head:[["Nome","CPF","Nº da Matricula","Status Matrícula","E-mail","Telefone"]],body:i,margin:{top:35}})}e.save("table.pdf")},recuperarAlunosPorOcupacao:function(){var a=this;a.matriculas_com_ocupacao=[],a.ocupacoes=[];var t=d["a"].firestore();if(""!=this.curso_uid)t.collection("matricula").where("curso_uid","==",a.curso_uid).get().then((function(t){a.quant_matricula=t.size,t.forEach((function(t){a.recuperarOcupacaoPorMactricula(t.id,t.data())}))})).catch((function(a){console.log("Erro ao recuperar Cursos: ",a)}));else{var e=t.collection("ocupacao");"sim"!=a.matricula.possuiOcupacao&&"nao"!=a.matricula.possuiOcupacao||(e=e.where("data_fim","==",null)),e.get().then((function(t){a.quant_ocupacoes=t.size,t.forEach((function(e){var o={data_inicio:"",data_fim:"",local:"",eh_remunerado:"",matricula_uid:"",status_matricula:"",numero_matricula:"",aluno_nome:"",aluno_cpf:"",aluno_email:"",aluno_telefone:""};if("nao"!=a.matricula.possuiOcupacao){var i=["01","02","03","04","05","06","07","08","09","10","11","12"],s=new Date(JSON.stringify(e.data().data_inicio.toDate()).slice(1,11));if(o.data_inicio=String(s.getDate()).padStart(2,"0")+"-"+i[s.getMonth()]+"-"+s.getFullYear(),null!=e.data().data_fim){var r=new Date(JSON.stringify(e.data().data_fim.toDate()).slice(1,11));o.data_fim=String(r.getDate()).padStart(2,"0")+"-"+i[r.getMonth()]+"-"+r.getFullYear()}o.local=e.data().local,o.eh_remunerado=e.data().eh_remunerado,o.matricula_uid=e.data().matricula_uid,a.recuperarMatricula(e.data().matricula_uid,o)}else a.matriculas_com_ocupacao.push(e.data().matricula_uid),a.matriculas_com_ocupacao.length==t.size&&a.recuperarMatricula(null,null)}))})).catch((function(a){console.log("Erro ao recuperar ocupacoes! ",a)}))}},recuperarOcupacaoPorMactricula:function(a,t){var e=this,o=d["a"].firestore();o.collection("ocupacao").where("matricula_uid","==",a).get().then((function(o){if(0==o.size&&"nao"==e.matricula.possuiOcupacao){e.quant_ocupacoes+=1;var i=Object(Ba["a"])({data_inicio:"",data_fim:"",local:"",eh_remunerado:"",matricula_uid:"",status_matricula:"",numero_matricula:"",aluno_nome:"",aluno_cpf:"",aluno_email:"",aluno_telefone:""},"matricula_uid","");i.status_matricula=t.status_matricula,i.numero_matricula=t.numero_matricula,i.matricula_uid=a,i.curso_uid=t.curso_uid,e.recuperarAlunoOcupacao(t.aluno_uid,i,!0)}if(o.size>0&&"nao"!=e.matricula.possuiOcupacao){e.quant_ocupacoes+=o.size;var s=["01","02","03","04","05","06","07","08","09","10","11","12"];o.forEach((function(o){var i=Object(Ba["a"])({data_inicio:"",data_fim:"",local:"",eh_remunerado:"",matricula_uid:"",status_matricula:"",numero_matricula:"",aluno_nome:"",aluno_cpf:"",aluno_email:"",aluno_telefone:""},"matricula_uid","");i.status_matricula=t.status_matricula,i.numero_matricula=t.numero_matricula,i.matricula_uid=a,i.curso_uid=t.curso_uid,i.local=o.data().local;var r=new Date(JSON.stringify(o.data().data_inicio.toDate()).slice(1,11));if(i.data_inicio=String(r.getDate()).padStart(2,"0")+"-"+s[r.getMonth()]+"-"+r.getFullYear(),null!=o.data().data_fim){var c=new Date(JSON.stringify(o.data().data_fim.toDate()).slice(1,11));i.data_fim=String(c.getDate()).padStart(2,"0")+"-"+s[c.getMonth()]+"-"+c.getFullYear()}i.eh_remunerado=o.data().eh_remunerado,e.recuperarAlunoOcupacao(t.aluno_uid,i,!0)}))}})).catch((function(a){console.log("Erro ao recuperar Cursos: ",a)}))},recuperarMatricula:function(a,t){var e=this,o=d["a"].firestore(),i=o.collection("matricula");null!=a?i.doc(a).get().then((function(a){t.status_matricula=a.data().status_matricula,t.numero_matricula=a.data().numero_matricula,t.curso_uid=a.data().curso_uid,e.recuperarAlunoOcupacao(a.data().aluno_uid,t,!1)})).catch((function(a){console.log("Erro ao recuperar aluno: ",a)})):i.get().then((function(a){e.quant_ocupacoes=a.size-e.matriculas_com_ocupacao.length,a.forEach((function(a){var t="sim",o=0;for(o in e.matriculas_com_ocupacao)a.id==e.matriculas_com_ocupacao[o]&&(t="nao");if("sim"==t){var i={data_inicio:"",data_fim:"",local:"",eh_remunerado:"",matricula_uid:"",status_matricula:"",numero_matricula:"",aluno_nome:"",aluno_cpf:"",aluno_email:"",aluno_telefone:""};i.status_matricula=a.data().status_matricula,i.numero_matricula=a.data().numero_matricula,i.curso_uid=a.data().curso_uid,e.recuperarAlunoOcupacao(a.data().aluno_uid,i,!1)}}))})).catch((function(a){console.log("Erro ao recuperar aluno: ",a)}))},recuperarAlunoOcupacao:function(a,t,e){var o=this,i=d["a"].firestore();i.collection("aluno").doc(a).get().then((function(a){o.recuperarPessoaOcupacao(a.data().pessoa_uid,t,e)})).catch((function(a){console.log("Erro ao recuperar aluno: ",a)}))},recuperarPessoaOcupacao:function(a,t,e){var o=this,i=d["a"].firestore();i.collection("pessoa").doc(a).get().then((function(a){t.aluno_nome=a.data().nome,t.aluno_email=a.data().email,t.aluno_cpf=a.data().cpf,t.aluno_telefone=a.data().telefone,o.ocupacoes.push(t),o.ocupacoes.length==o.quant_ocupacoes&&o.gerarRelatorioAlunosPorOcupacao()})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},gerarRelatorioAlunosPorOcupacao:function(){var a=this,t=new Ya["default"]("landscape"),e=(t.internal.pageSize.height||t.internal.pageSize.getHeight(),t.internal.pageSize.width||t.internal.pageSize.getWidth());t.setFontSize(12),"não"==a.matricula.possuiOcupacao?t.text("Alunos sem Ocupação por curso",e/2,20,null,null,"center"):t.text("Ocupações dos alunos por curso",e/2,20,null,null,"center");var o=[],i=0;for(i in this.ocupacoes){a=this;var s=this.cursos.filter((function(t){return t.uid==a.ocupacoes[i].curso_uid}));if("nao"==a.matricula.possuiOcupacao)var r=[this.ocupacoes[i].aluno_nome,this.ocupacoes[i].aluno_cpf,this.ocupacoes[i].aluno_email,s[0].descricao,this.ocupacoes[i].numero_matricula];else r=[this.ocupacoes[i].aluno_nome,this.ocupacoes[i].aluno_cpf,this.ocupacoes[i].aluno_email,s[0].descricao,this.ocupacoes[i].numero_matricula,this.ocupacoes[i].local,this.ocupacoes[i].data_inicio,this.ocupacoes[i].data_fim,1==this.ocupacoes[i].eh_remunerado?"Sim":"Não"];o.push(r)}var c="";c="nao"==a.matricula.possuiOcupacao?[["Nome","CPF","E-mail","Curso","Nº da Matricula"]]:[["Nome","CPF","E-mail","Curso","Nº da Matricula","Local","Data Início","Data Fim","Remunerado"]],t.autoTable({head:c,body:o,margin:{top:35}}),t.save("table.pdf")}},components:{"my-base":Q}}),Wa=Ga,Ha=(e("289a"),Object(n["a"])(Wa,Ua,La,!1,null,"6693898e",null)),Xa=Ha.exports,Ka=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("my-base",[e("div",{attrs:{slot:"my-content"},slot:"my-content"},[e("div",{staticClass:"md-layout md-gutter"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("md-card",[e("md-card-header",[e("md-card-header-text",[e("div",{staticClass:"md-title"},[a._v(a._s(a.pessoa.nome))])]),e("md-button",{staticClass:"md-raised md-button-green",on:{click:function(t){return a.atualizar_pessoa()}}},[a._v(" Atualizar "),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("Atualizar Dados")])],1)],1),e("md-card-content",{staticClass:"md-scrollbar"},[e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("CPF")]),e("md-input",{attrs:{name:"cpf"},model:{value:a.pessoa.cpf,callback:function(t){a.$set(a.pessoa,"cpf",t)},expression:"pessoa.cpf"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Email")]),e("md-input",{attrs:{name:"email"},model:{value:a.pessoa.email,callback:function(t){a.$set(a.pessoa,"email",t)},expression:"pessoa.email"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("div",{staticClass:"block",staticStyle:{"text-align":"left"}},[e("label",{staticStyle:{position:"absolute",color:"#978e8e","font-size":"12px"},attrs:{for:"dataNasc"}},[a._v("Data Nascimento")]),e("md-datepicker",{model:{value:a.pessoa.data_nascimento,callback:function(t){a.$set(a.pessoa,"data_nascimento",t)},expression:"pessoa.data_nascimento"}})],1)]),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",[e("label",{attrs:{for:"matricula"}},[a._v("Telefone")]),e("md-input",{attrs:{name:"telefone"},model:{value:a.pessoa.telefone,callback:function(t){a.$set(a.pessoa,"telefone",t)},expression:"pessoa.telefone"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("md-divider"),e("h4",{staticStyle:{display:"inline-block"}},[a._v("Atualizar Senha")]),e("div",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",{attrs:{"md-clearable":""}},[e("label",[a._v("Nova Senha")]),e("md-input",{attrs:{type:"password"},model:{value:a.user.nova_senha,callback:function(t){a.$set(a.user,"nova_senha",t)},expression:"user.nova_senha"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-10"}),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-field",{attrs:{"md-clearable":""}},[e("label",[a._v("Confirmar Senha")]),e("md-input",{attrs:{type:"password"},model:{value:a.user.confirmar_senha,callback:function(t){a.$set(a.user,"confirmar_senha",t)},expression:"user.confirmar_senha"}})],1)],1)])]),e("div",{staticClass:"md-layout-item md-size-100"},[e("div",{staticClass:"md-layout md-alignment-center"},[e("div",{staticClass:"md-layout-item md-size-50",staticStyle:{"text-align":"center"}},[e("md-button",{staticClass:"md-raised md-button-green",on:{click:function(t){return a.validar_nova_senha()}}},[a._v(" Atualizar "),e("md-tooltip",{attrs:{"md-direction":"left"}},[a._v("atualizar_senha")])],1)],1)])])])],1)])])],1)],1)]),e("md-dialog",{attrs:{"md-active":a.showDialogAutenticacao},on:{"update:mdActive":function(t){a.showDialogAutenticacao=t},"update:md-active":function(t){a.showDialogAutenticacao=t}}},[e("md-card",{staticStyle:{width:"-webkit-fill-available",display:"grid"}},[e("md-card-header",[e("div",{staticClass:"md-title"},[a._v("Credenciais para atualizar senha")])]),e("form",[e("md-card-content",[e("md-card-content",[e("div",{staticClass:"md-layout md-gutter",attrs:{id:"cadastroMatricula"}},[e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",[e("label",[a._v("Email")]),e("md-input",{model:{value:a.user.email,callback:function(t){a.$set(a.user,"email",t)},expression:"user.email"}})],1)],1),e("div",{staticClass:"md-layout-item md-size-50"},[e("md-field",{attrs:{"md-clearable":""}},[e("label",[a._v("Senha")]),e("md-input",{attrs:{type:"password"},model:{value:a.user.senha,callback:function(t){a.$set(a.user,"senha",t)},expression:"user.senha"}})],1)],1)])])],1),e("md-card-actions",[e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){a.showDialogAutenticacao=!1}}},[a._v("Fechar")]),e("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){return a.reautenticar_usuario()}}},[a._v("Atualizar Senha")])],1)],1)],1)],1)],1)])},Qa=[],Za={data:function(){return{pessoa:{},currentUser:{},user:{nova_senha:"",confirmar_senha:"",email:"",senha:""},showDialogAutenticacao:!1}},mounted:function(){var a=this;console.log(localStorage.getItem("title")),this.currentUser=d["a"].auth().currentUser;var t=d["a"].firestore();t.collection("usuario").where("auth_uid","==",this.currentUser.uid).get().then((function(t){t.forEach((function(t){a.recuperarPessoa(t.data())}))})).catch((function(a){console.log("Erro ao recuperar usuario: ",a)}))},methods:{recuperarPessoa:function(a){var t=this,e=d["a"].firestore();e.collection("pessoa").doc(a.pessoa_uid).get().then((function(a){var e=JSON.stringify(a.data().data_nascimento.toDate()).slice(1,11);t.pessoa=a.data(),t.pessoa.uid=a.id,t.pessoa.data_nascimento=e})).catch((function(a){console.log("Erro ao recuperar pessoa: ",a)}))},atualizar_pessoa:function(){var a=d["a"].firestore();a.collection("pessoa").doc(this.pessoa.uid).update({cpf:this.pessoa.cpf,email:this.pessoa.email,telefone:this.pessoa.telefone,data_nascimento:d["a"].firestore.Timestamp.fromDate(new Date(this.pessoa.data_nascimento))}).then((function(){alert("Pessoa atualizada!")})).catch((function(a){alert("Erro ao atualizar pessoa! ",a)}))},validar_nova_senha:function(){""!=this.user.nova_senha&&""!=this.user.confirmar_senha&&this.user.nova_senha==this.user.confirmar_senha?this.showDialogAutenticacao=!0:alert("A nova senha tem que ser igual a confirmação")},reautenticar_usuario:function(){var a=this,t=d["a"].auth.EmailAuthProvider.credential(this.user.email,this.user.senha);a.currentUser.reauthenticateWithCredential(t).then((function(){a.atualizar_senha()})).catch((function(a){alert("Email e/o senha inválidos!")}))},atualizar_senha:function(){var a=this;a.currentUser.updatePassword(this.user.nova_senha).then((function(){a.showDialogAutenticacao=!1,alert("Senha atualizada com sucesso!")})).catch((function(a){alert("Erro ao atualizar senha!")}))}},components:{"my-base":Q}},at=Za,tt=(e("1927"),Object(n["a"])(at,Ka,Qa,!1,null,"d04cefec",null)),et=tt.exports,ot=[{path:"",component:g,titulo:"Login"},{path:"/cadastro",component:S,titulo:"CadastroAluno"},{path:"/home",component:na,titulo:"Home",meta:{requiresAuth:!0}},{path:"/alunos",component:va,titulo:"Alunos",meta:{requiresAuth:!0}},{path:"/aluno/detalhes",component:Ea,titulo:"DetalhesAluno",meta:{requiresAuth:!0}},{path:"/cursos",component:Na,titulo:"Cursos",meta:{requiresAuth:!0}},{path:"/curso/detalhes",component:Ja,titulo:"DetalhesCurso",meta:{requiresAuth:!0}},{path:"/relatorios",component:Xa,titulo:"Relatorios",meta:{requiresAuth:!0}},{path:"/configuracoes",component:et,titulo:"Configuracoes",meta:{requiresAuth:!0}}],it=e("43f9"),st=e.n(it);e("51de"),e("38bb"),e("adc5"),e("40ac");o["default"].use(Ya["default"]),o["default"].use(m["a"]),o["default"].use(st.a),o["default"].use(d["a"]);var rt={apiKey:"AIzaSyDmf1tBqqYIRXQL9cdTrIrWiINPDYHz9y0",authDomain:"egresso-ifpi.firebaseapp.com",projectId:"egresso-ifpi",storageBucket:"egresso-ifpi.appspot.com",messagingSenderId:"534328877383",appId:"1:534328877383:web:f1c117d4efd33da066ac62",measurementId:"G-JX9EZDM7HY"};d["a"].initializeApp(rt),d["a"].analytics(),o["default"].config.productionTip=!1,o["default"].prototype.$bus=new o["default"]({});var ct=new m["a"]({routes:ot,mode:"history"});ct.beforeEach((function(a,t,e){d["a"].firestore();var o=d["a"].auth().currentUser,i=a.matched.some((function(a){return a.meta.requiresAuth}));i&&!o?e(""):!i&&o?e("home"):e()}));var nt="";d["a"].auth().onAuthStateChanged((function(){nt||(nt=new o["default"]({el:"#app",router:ct,render:function(a){return a(u)},firebase:d["a"]}))}))},"5a2e":function(a,t,e){},"5c2b":function(a,t,e){"use strict";e("aa4f")},"6a05":function(a,t,e){},7330:function(a,t,e){},8241:function(a,t,e){},"85ec":function(a,t,e){},"9aeb":function(a,t,e){"use strict";e("5a2e")},aa4f:function(a,t,e){},aa55:function(a,t,e){},adc5:function(a,t,e){},c1d1:function(a,t,e){a.exports=e.p+"img/LogoIFPI.0b7ef925.png"},db78:function(a,t,e){"use strict";e("2a85")},e542:function(a,t,e){"use strict";e("2369")},e5d5:function(a,t,e){"use strict";e("e9e1")},e9e1:function(a,t,e){},ee01:function(a,t,e){},f4f0:function(a,t,e){"use strict";e("468f")},f6c7:function(a,t,e){"use strict";e("8241")},fad2:function(a,t,e){"use strict";e("6a05")}});
//# sourceMappingURL=app.cace7297.js.map